<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SVG Drawing Tool</title>

<style>
  * {
    box-sizing: border-box;
    font-family: system-ui, sans-serif;
  }

  body {
    margin: 0;
    background: #f9fafb;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 2vh;
  }

  .toolbar {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
  }

  button {
    padding: 0.5rem 1rem;
    border-radius: 8px;
    border: none;
    background: #4f46e5;
    color: white;
    cursor: pointer;
  }

  button:hover {
    opacity: 0.9;
  }

  input[type="color"] {
    width: 40px;
    height: 40px;
    border: none;
    padding: 0;
    cursor: pointer;
  }

  svg {
    width: 90vw;
    height: 70vh;
    background: white;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    cursor: crosshair;
  }
</style>
</head>

<body>

<div class="toolbar">
  <input type="color" id="colorPicker" value="#000000">
  <button id="undoBtn">Undo</button>
</div>

<svg id="canvas"></svg>

<script>
  const svg = document.getElementById("canvas");
  const colorPicker = document.getElementById("colorPicker");
  const undoBtn = document.getElementById("undoBtn");

  let isDrawing = false;
  let currentPath = null;
  let paths = [];

  svg.addEventListener("mousedown", (e) => {
    isDrawing = true;

    const point = getMousePosition(e);

    currentPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
    currentPath.setAttribute("stroke", colorPicker.value);
    currentPath.setAttribute("stroke-width", "3");
    currentPath.setAttribute("fill", "none");
    currentPath.setAttribute("d", `M ${point.x} ${point.y}`);

    svg.appendChild(currentPath);
    paths.push(currentPath);
  });

  svg.addEventListener("mousemove", (e) => {
    if (!isDrawing) return;

    const point = getMousePosition(e);
    const d = currentPath.getAttribute("d");
    currentPath.setAttribute("d", `${d} L ${point.x} ${point.y}`);
  });

  svg.addEventListener("mouseup", () => {
    isDrawing = false;
  });

  svg.addEventListener("mouseleave", () => {
    isDrawing = false;
  });

  undoBtn.addEventListener("click", () => {
    const last = paths.pop();
    if (last) svg.removeChild(last);
  });

  function getMousePosition(evt) {
    const rect = svg.getBoundingClientRect();
    return {
      x: evt.clientX - rect.left,
      y: evt.clientY - rect.top
    };
  }
</script>

</body>
</html>
